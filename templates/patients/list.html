<!-- templates/patients/list.html -->
{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>–°–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</h2>
    <a href="{{ url_for('patient_create') }}" class="btn btn-primary">
        üÜï –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞
    </a>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

{% if patients %}
<table class="table table-striped table-hover align-middle">
    <thead class="table-light">
        <tr>
            <th>–§–ò–û</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
            <th>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for p in patients %}
        <tr>
            <td>{{ p.FullName }}</td>
            <td>{{ p.Phone }}</td>
            <td>{{ p.BirthDate }}</td>
            <td>{{ p.RegDate[:10] }}</td>
            <td>
                <a href="{{ url_for('patient_detail', pid=p.PatientID) }}" class="btn btn-sm btn-outline-primary">–ö–∞—Ä—Ç–∞</a>
                <a href="{{ url_for('tooth_chart', pid=p.PatientID) }}" class="btn btn-sm btn-outline-success">–ó—É–±—ã</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-warning">
    <strong>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:</strong> –ü–∞—Ü–∏–µ–Ω—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤–æ–≥–æ!
</div>
{% endif %}
{% endblock %}